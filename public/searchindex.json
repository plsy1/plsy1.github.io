{"categories":[],"posts":[{"content":"编译ffmpeg添加libaribcaption libaribcaption cd libaribcaption mkdir build cd build cmake .. -DCMAKE_BUILD_TYPE=Release cmake --build . -j8 cmake --install . ffmpeg git clone https://git.ffmpeg.org/ffmpeg.git cd ffmpeg ./configure --enable-libaribcaption --enable-gpl --enable-nonfree sudo make -j$(nproc) 提取字幕 输出ass字幕：\n./ffmpeg -analyzeduration 10MB -probesize 10MB -fix_sub_duration -ignore_background 1 -itsoffset 5 -i EPXXX.ts -c:s ass EPXXX.ass 输出srt字幕：\n./ffmpeg -analyzeduration 10MB -probesize 10MB -fix_sub_duration -ignore_background 1 -itsoffset 5 -i EPXXX.ts -c:s text EPXXX.srt 调整字幕缩放(ass) ts文件分辨率1440*1080，比例4:3，提取出来的字幕16:9，某些播放器直接放的话，字幕有点扁平。\n方法一 sed -i 's/100,100/75,100/' subtitle.ass 方法二 用aegisub的Resample Resolution工具调整分辨率为1440*1080\n[Script Info] ScriptType: v4.00+ ScaledBorderAndShadow: yes PlayResX: 1440 PlayResY: 1080 LayoutResX: 960 LayoutResY: 540 YCbCr Matrix: TV.709 WrapStyle: 0 ","id":0,"section":"posts","summary":"编译ffmpeg添加libaribcaption libaribcaption cd libaribcaption mkdir build cd build cmake .. -DCMAKE_BUILD_TYPE=Release cmake --build . -j8 cmake --install . ffmpeg git clone https://git.ffmpeg.org/ffmpeg.git cd ffmpeg ./configure --enable-libaribcaption --enable-gpl --enable-nonfree sudo make -j$(nproc) 提取字幕 输出ass字幕： ./ffmpeg -analyzeduration 10MB -probesize","tags":["ffmpeg"],"title":"从ts文件提取arib字幕","uri":"http://localhost:1313/2025/02/%E4%BB%8Ets%E6%96%87%E4%BB%B6%E6%8F%90%E5%8F%96arib%E5%AD%97%E5%B9%95/","year":"2025"},{"content":"在企业微信的应用配置中，需要设置“可信 IP”或绑定已认证的域名。对于个人用户，通常只能选择绑定 IP 地址。家用宽带要么没有公网，要么公网 IP 是动态分配的，每次重新拨号后可能会获得一个新的 IP，这意味着需要频繁地更新“可信 IP”设置，非常不方便。\n考虑将原来的数据通信路径：\n去程：微信客户端 → 腾讯服务器 → NAS\n回程：NAS → 腾讯服务器 → 微信客户端\n通过引入 VPS 后，变为以下路径：\n去程：微信客户端 → 腾讯服务器 → NAS（有公网的情况）\n回程：NAS → VPS → 腾讯服务器 → 微信客户端\n如此一来只需要绑定 VPS 的 IP，这里以 frp 为例进行配置，使用zerotier应该也能实现。\n服务端配置 安装frps wget https://raw.githubusercontent.com/mvscode/frps-onekey/master/install-frps.sh -O ./install-frps.sh chmod 700 ./install-frps.sh ./install-frps.sh install 一直按enter即可。\n安装微信中转代理 apt upgrade -y \u0026amp;\u0026amp; apt install curl -y \u0026amp;\u0026amp; curl -fsSL https://get.docker.com -o get-docker.sh \u0026amp;\u0026amp; sh get-docker.sh \u0026amp;\u0026amp; timedatectl set-timezone Asia/Shanghai \u0026amp;\u0026amp; docker run -d \\ --name wxchat \\ --restart=always \\ -p 81:80 \\ ddsderek/wxchat:latest 客户端配置 docker 安装 frpc 编辑frpc.toml serverAddr = \u0026#34;\u0026#34; serverPort = 5443 auth.method = \u0026#34;token\u0026#34; auth.token = \u0026#34;\u0026#34; ##token log.to = \u0026#34;/frp/logs/frpc.log\u0026#34; log.level = \u0026#34;info\u0026#34; log.maxDays = 180 log.disablePrintColor = false [[proxies]] name = \u0026#34;moviepilot\u0026#34; type = \u0026#34;http\u0026#34; localIP = \u0026#34;1.1.1.1\u0026#34; ##moviepilot的局域网ip localPort = 3000 customDomains = [\u0026#34;\u0026#34;] ##不绑定域名的话可以直接填vps的ip transport.useEncryption = true transport.useCompression = false docker-compose services: frpc: image: snowdreamtech/frpc:latest container_name: frpc restart: always network_mode: host volumes: - ./frpc.toml:/etc/frp/frpc.toml:ro - ./logs:/frp/logs 其他设置 moviepilot新增一条环境变量WECHAT_PROXY: http://qyapi.weixin.qq.com:81\n修改qyapi.weixin.qq.com的 host为vps的ip\n","id":1,"section":"posts","summary":"在企业微信的应用配置中，需要设置“可信 IP”或绑定已认证的域名。对于个人用户，通常只能选择绑定 IP 地址。家用宽带要么没有公网，要么公网 IP 是动态","tags":["nas","pt"],"title":"Moviepilot \u0026 VPS 配置微信消息通知","uri":"http://localhost:1313/2024/10/moviepilot-vps-%E9%85%8D%E7%BD%AE%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF%E9%80%9A%E7%9F%A5/","year":"2024"}],"tags":[{"title":"Ffmpeg","uri":"http://localhost:1313/tags/ffmpeg/"},{"title":"Nas","uri":"http://localhost:1313/tags/nas/"},{"title":"Pt","uri":"http://localhost:1313/tags/pt/"}]}