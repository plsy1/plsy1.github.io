{"categories":[],"posts":[{"content":"在企业微信应用那边，需要设置“可信ip”或者绑定域名（需要认证），作为个人用户自然是只能绑定ip。那么家宽由于公网肯定不合适：每次重新拨号大概率会分配到一个新的ip，需要重新设置绑定可信ip，为了解决这个问题，可以使用内网穿透工具来实现ip地址固定。比如zerotier、frp。这里以frp为例。\n目的是实现从：\n去程：微信客户端-\u0026gt;🐧服务器-\u0026gt;NAS\n回程：NAS-\u0026gt;🐧服务器-\u0026gt;微信客户端\n变成：\n去程：微信客户端-\u0026gt;🐧服务器-\u0026gt;NAS\nNAS-\u0026gt;VPS-\u0026gt;🐧服务器-\u0026gt;微信客户端\n服务端 安装frps wget https://raw.githubusercontent.com/mvscode/frps-onekey/master/install-frps.sh -O ./install-frps.sh chmod 700 ./install-frps.sh ./install-frps.sh install 一直按enter即可。\n安装微信中转代理 apt upgrade -y \u0026amp;\u0026amp; apt install curl -y \u0026amp;\u0026amp; curl -fsSL https://get.docker.com -o get-docker.sh \u0026amp;\u0026amp; sh get-docker.sh \u0026amp;\u0026amp; timedatectl set-timezone Asia/Shanghai \u0026amp;\u0026amp; docker run -d \\ --name wxchat \\ --restart=always \\ -p 81:80 \\ ddsderek/wxchat:latest 客户端 docker 安装 frpc 编辑frpc.toml serverAddr = \u0026#34;\u0026#34; serverPort = 5443 auth.method = \u0026#34;token\u0026#34; auth.token = \u0026#34;\u0026#34; ##token log.to = \u0026#34;/frp/logs/frpc.log\u0026#34; log.level = \u0026#34;info\u0026#34; log.maxDays = 180 log.disablePrintColor = false [[proxies]] name = \u0026#34;moviepilot\u0026#34; type = \u0026#34;http\u0026#34; localIP = \u0026#34;1.1.1.1\u0026#34; ##moviepilot的局域网ip localPort = 3000 customDomains = [\u0026#34;\u0026#34;] ##不绑定域名的话可以直接填vps的ip transport.useEncryption = true transport.useCompression = false docker-compose services: frpc: image: snowdreamtech/frpc:latest container_name: frpc restart: always network_mode: host volumes: - ./frpc.toml:/etc/frp/frpc.toml:ro - ./logs:/frp/logs moviepilot设置 新增一条环境变量WECHAT_PROXY: http://qyapi.weixin.qq.com:81\n修改host 修改qyapi.weixin.qq.com的 host为vps的ip\n","id":0,"section":"posts","summary":"在企业微信应用那边，需要设置“可信ip”或者绑定域名（需要认证），作为个人用户自然是只能绑定ip。那么家宽由于公网肯定不合适：每次重新拨号大","tags":["nas","pt","frp","vps"],"title":"Moviepilot \u0026 VPS 配置微信消息通知","uri":"https://plsy1.github.io/2024/10/test/","year":"2024"}],"tags":[{"title":"Frp","uri":"https://plsy1.github.io/tags/frp/"},{"title":"Nas","uri":"https://plsy1.github.io/tags/nas/"},{"title":"Pt","uri":"https://plsy1.github.io/tags/pt/"},{"title":"Vps","uri":"https://plsy1.github.io/tags/vps/"}]}